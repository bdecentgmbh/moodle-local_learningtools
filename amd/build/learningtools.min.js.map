{"version":3,"sources":["../src/learningtools.js"],"names":["define","$","learning_tools_action","viewbookmarks","viewnote","loggedin","fabbuttonhtml","insertBefore","on","hasClass","removeClass","addClass","sorttype","attr","sort_action_page","ltools","pagebookmarks","notestrigger","setTimeout","trigger","removeURLParameter","url","parameter","urlparts","split","length","prefix","encodeURIComponent","pars","i","lastIndexOf","splice","join","pageurl","window","location","href","indexOf","para","open","init"],"mappings":"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","sourcesContent":["define(['jquery', 'core/str'], function($, str) {\r\n    /**\r\n     * Controls learningtools action.\r\n     * @param {bool} viewbookmarks \r\n     * @param {bool} viewnote \r\n     * \r\n     */\r\n    function learning_tools_action(viewbookmarks, viewnote, loggedin) {\r\n        // Add fab button.\r\n        if (loggedin) {\r\n            $(fabbuttonhtml).insertBefore(\"footer\");\r\n        }\r\n\r\n        $(\".floating-button #tool-action-button\").on('click', function(){\r\n            if ($(\".list-learningtools\").hasClass('show')) {\r\n                $(\".list-learningtools\").removeClass('show');\r\n            } else{\r\n                $(\".list-learningtools\").addClass('show');\r\n            }\r\n        });\r\n\r\n        $(\".sort-block i#bookmarkssorttype\").on('click', function() {\r\n            var sorttype = $(this).attr('data-type');\r\n            sort_action_page(sorttype);\r\n\r\n        });\r\n\r\n\r\n         $(\".ltnote-sortfilter i#notessorttype\").on('click', function() {\r\n            var sorttype = $(this).attr('data-type');\r\n            sort_action_page(sorttype);\r\n        });\r\n\r\n        if (ltools.pagebookmarks) {\r\n            $(\".ltbookmarksinfo i\").addClass('marked');\r\n        } else {\r\n            $(\".ltbookmarksinfo i\").removeClass('marked');\r\n        }\r\n\r\n        // trigger button\r\n\r\n        if (ltools.notestrigger == 'trigger') {\r\n            setTimeout(function(){ \r\n                 $('#ltnoteinfo #ltnote-action').trigger('click');\r\n            }, 3000);\r\n        }\r\n    \r\n    }\r\n\r\n    function removeURLParameter(url, parameter) {\r\n        //prefer to use l.search if you have a location/link object\r\n        var urlparts= url.split('?');\r\n        if (urlparts.length>=2) {\r\n\r\n            var prefix= encodeURIComponent(parameter)+'=';\r\n            var pars= urlparts[1].split(/[&;]/g);\r\n\r\n            //reverse iteration as may be destructive\r\n            for (var i= pars.length; i-- > 0;) {\r\n                //idiom for string.startsWith\r\n                if (pars[i].lastIndexOf(prefix, 0) !== -1) {\r\n                    pars.splice(i, 1);\r\n                }\r\n            }\r\n\r\n            // alert(parameter);\r\n            url= urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : \"\");\r\n            return url;\r\n        } else {\r\n            return url;\r\n        }\r\n    }\r\n\r\n    function sort_action_page(sorttype) {\r\n\r\n        var pageurl = window.location.href;\r\n        pageurl = removeURLParameter(pageurl, 'sorttype');\r\n\r\n        if(sorttype == 'asc') {\r\n            sorttype = 'desc';\r\n        } else if (sorttype == 'desc') {\r\n            sorttype = 'asc';\r\n        }\r\n        \r\n        if (pageurl.indexOf('?') > -1) {\r\n            var para = '&';\r\n        } else {\r\n            var para = '?';\r\n        }\r\n\r\n        pageurl = pageurl+para+'sorttype='+ sorttype;\r\n        window.open(pageurl, '_self');\r\n    }\r\n\r\n    return {\r\n        init: function(viewbookmarks, viewnote, loggedin) {\r\n            learning_tools_action(viewbookmarks, viewnote, loggedin);\r\n        }\r\n    };\r\n});"],"file":"learningtools.min.js"}