/**
 * Bookmarks ltool define js.
 * @module   ltool_bookmarks
 * @category  Classes - autoloading
 * @copyright 2021, bdecent gmbh bdecent.de
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("ltool_bookmarks/learningbookmarks",["core/str","core/ajax","core/notification"],(function(String,Ajax,notification){function learningToolBookmarksAction(contextid,params){var bookmarkmarked=document.getElementById("bookmarks-marked");bookmarkmarked&&(pagebookmarks?bookmarkmarked.classList.add("marked"):bookmarkmarked.classList.remove("marked"));var bookmarksform=document.getElementById("ltbookmarks-action");if(bookmarksform){bookmarksform.addEventListener("click",(function(e){e.preventDefault(),function(contextid,formData){""==formData.pagetitle&&(formData.pagetitle=document.querySelector("title").innerHTML);var Formdata=JSON.stringify(formData);Ajax.call([{methodname:"ltool_bookmarks_save_userbookmarks",args:{contextid:contextid,formdata:Formdata},done:function(response){notification.addNotification({message:response.bookmarksmsg,type:response.notificationtype});var bookmarkmarked=document.getElementById("bookmarks-marked");response.bookmarksstatus?bookmarkmarked.classList.add("marked"):bookmarkmarked.classList.remove("marked"),0!=ltools.disappertimenotify&&setTimeout((function(){document.querySelector("span.notifications").innerHTML=""}),ltools.disappertimenotify)}}])}(contextid,params)}));var bookmarkshovercolor=bookmarksform.getAttribute("data-hovercolor"),bookmarksfontcolor=bookmarksform.getAttribute("data-fontcolor");bookmarkshovercolor&&bookmarksfontcolor&&bookmarksform.addEventListener("mouseover",(function(){document.querySelector("#ltbookmarks-action p").style.background=bookmarkshovercolor,document.querySelector("#ltbookmarks-action p").style.color=bookmarksfontcolor}))}var bookmarkssorttype=document.getElementById("bookmarkssorttype");bookmarkssorttype&&bookmarkssorttype.addEventListener("click",(function(){!function(sorttype){var pageurl=window.location.href,para="";pageurl=function(url,parameter){var urlparts=url.split("?");if(urlparts.length>=2){for(var prefix=encodeURIComponent(parameter)+"=",pars=urlparts[1].split(/[&;]/g),i=pars.length;i-- >0;)-1!==pars[i].lastIndexOf(prefix,0)&&pars.splice(i,1);return url=urlparts[0]+(pars.length>0?"?"+pars.join("&"):"")}return url}(pageurl,"sorttype"),"asc"==sorttype?sorttype="desc":"desc"==sorttype&&(sorttype="asc");para=pageurl.indexOf("?")>-1?"&":"?";pageurl=pageurl+para+"sorttype="+sorttype,window.open(pageurl,"_self")}(this.getAttribute("data-type"))}))}return{init:function(contextid,params){learningToolBookmarksAction(contextid,params)}}}));

//# sourceMappingURL=learningbookmarks.min.js.map