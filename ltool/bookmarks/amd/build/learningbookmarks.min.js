define ("ltool_bookmarks/learningbookmarks",["core/str","core/ajax","core/notification"],function(a,b,c){function d(a,b){var c=document.getElementById("bookmarks-marked");if(c){if(pagebookmarks){c.classList.add("marked")}else{c.classList.remove("marked")}}var d=document.getElementById("ltbookmarks-action");if(d){d.addEventListener("click",function(c){c.preventDefault();g(a,b)});var f=d.getAttribute("data-hovercolor");if(f){d.addEventListener("mouseover",function(){document.querySelector("#ltbookmarks-action p").style.background=f})}}var h=document.getElementById("bookmarkssorttype");if(h){h.addEventListener("click",function(){var a=this.getAttribute("data-type");e(a)})}}function e(a){var b=window.location.href,c="";b=f(b,"sorttype");if("asc"==a){a="desc"}else if("desc"==a){a="asc"}if(-1<b.indexOf("?")){c="&"}else{c="?"}b=b+c+"sorttype="+a;window.open(b,"_self")}function f(a,b){var c=a.split("?");if(2<=c.length){for(var d=encodeURIComponent(b)+"=",e=c[1].split(/[&;]/g),f=e.length;0<f--;){if(-1!==e[f].lastIndexOf(d,0)){e.splice(f,1)}}a=c[0]+(0<e.length?"?"+e.join("&"):"");return a}else{return a}}function g(a,d){if(""==d.pagetitle){d.pagetitle=document.querySelector("title").innerHTML}var e=JSON.stringify(d);b.call([{methodname:"ltool_bookmarks_save_userbookmarks",args:{contextid:a,formdata:e},done:function done(a){c.addNotification({message:a.bookmarksmsg,type:a.notificationtype});var b=document.getElementById("bookmarks-marked");if(a.bookmarksstatus){b.classList.add("marked")}else{b.classList.remove("marked")}if(0!=ltools.disappertimenotify){setTimeout(function(){document.querySelector("span.notifications").innerHTML=""},ltools.disappertimenotify)}}}])}return{init:function init(a,b){d(a,b)}}});
//# sourceMappingURL=learningbookmarks.min.js.map
