define ("ltool_schedule/schedule",["jquery","core/fragment","core/modal_factory","core/str","core/modal_events","core/notification"],function(a,b,c,d,e,f){var g=function(a){var b=this,c=document.querySelector(".ltoolschedule-info #ltoolschedule-action");if(c){var d=c.getAttribute("data-hovercolor"),e=c.getAttribute("data-fontcolor");if(d&&e){c.addEventListener("mouseover",function(){document.querySelector("#ltoolschedule-info p").style.background=d;document.querySelector("#ltoolschedule-info p").style.color=e})}c.addEventListener("click",function(){b.displaySchedulebox(a)})}};g.prototype.displaySchedulebox=function(b){var g=this,h=d.get_string("schedule","local_learningtools");return c.create({title:h,type:c.types.SAVE_CANCEL,body:g.getScheduleAction(b),large:!0}).then(function(c){c.getRoot().on(e.save,function(b){b.preventDefault();a(b.target).find("button[data-action=save]").attr("disabled",!0);c.getRoot().find("form").submit()});c.getRoot().on("submit","form",function(h){h.preventDefault();var e=document.querySelectorAll("#ltoolschedule-editorbox input[name='schedulename']")[0];if(e.value){g.submitFormData(b.contextid);var i=d.get_string("successtoolschedule","local_learningtools");a.when(i).done(function(a){f.addNotification({message:a,type:"success"})});if(0!=ltools.disappertimenotify){setTimeout(function(){document.querySelector("span.notifications").innerHTML=""},ltools.disappertimenotify)}}c.hide()});c.getRoot().on(e.hidden,function(){c.destroy()});c.show();return c}).fail(f.exception)};g.prototype.submitFormData=function(a){var c=document.querySelectorAll("#ltoolschedule-editorbox form")[0],d=new URLSearchParams(new FormData(c)).toString();b.loadFragment("ltool_schedule","set_calendar_event",a,{formdata:d});return!0};g.prototype.getScheduleAction=function(a){return b.loadFragment("ltool_schedule","get_schedule_form",a.contextid,a)};return{init:function init(a){return new g(a)}}});
//# sourceMappingURL=schedule.min.js.map
